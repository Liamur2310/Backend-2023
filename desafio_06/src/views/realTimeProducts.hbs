
<h1>Realtime Productos ( con websockets ) </h1>


<h2>Formulario alta producto</h2>

<div style="border: 1px solid black; padding: 5px;">
  <form id="productForm" action="/realTimeProducts" method="post">
    <label for="productTitle">Titulo:</label>
    <input type="text" id="productTitle" name="productTitle" required>
    <br><br>
    <label for="productDescription">Descripcion:</label>
    <input type="text" id="productDescription" name="productDescription" required>
    <br><br>
    <label for="productCode">Codigo:</label>
    <input type="text" id="productCode" name="productCode" required>
    <br><br>
    <label for="productPrice">Precio:</label>
    <input type="text" id="productPrice" name="productPrice" required>
    <br><br>
    <label for="productStock">Stock:</label>
    <input type="text" id="productStock" name="productStock" required>
    <br><br>
    <label for="productState">Estado:</label>
    <select id="productState">
      <option value="false">false</option>
      <option value="true">true</option>
    </select>
    <br><br>
    <label for="productCategory">Categoria:</label>
    <input type="text" id="productCategory" name="productCategory" required>
    <br><br>

    <button type="submit" id="addProductButton">Agregar Producto</button>
  </form>
</div>

<h2>Listado de productos </h2>
<div id="productsListDiv">
        <table id="productsTable">
            <thead>
              <tr>
                <th>Nombre</th>
                <th>Descripcion</th>
                <th>Codigo</th>
                <th>Precio</th>
                <th>Estado</th>
                <th>Stock</th>
                <th>Categoria</th>
                <th>Thumbnails</th>
            </tr>
            </thead>
            <tbody>  
              {{#each products}}
              <tr>
                  <td>{{this.title}}</td>
                  <td>{{this.description}}</td>
                  <td>{{this.code}}</td>
                  <td>{{this.price}}</td>
                  <td>{{this.status}}</td>
                  <td>{{this.stock}}</td>
                  <td>{{this.category}}</td>
                  <td>{{this.thumbnails}}</td>
              </tr>
              {{/each}}
            </tbody>
        </table>
</div>

<!-- <script src="https://cdn.socket.io/4.1.2/socket.io.min.js"></script> -->
<script src="/socket.io/socket.io.js"></script>
<script src="/js/main.js"></script>

<!-- 
<script>
  const productForm = document.getElementById('productForm');
  const productList = document.getElementById('real-time-products-list');

function addProduct() {
    console.log('Button clicked!'); // Verifica si este mensaje se muestra en la consola
    const productName = document.getElementById('productName').value;
    socket.emit('createProduct', { title: productName });
}

  // Escuchar actualizaciones de productos desde el servidor
  socket.on('updateProducts', (data) => {
    // Limpiar la lista
    productList.innerHTML = '';

    // Renderizar la nueva lista de productos
    data.products.forEach((product) => {
      const listItem = document.createElement('li');

      listItem.innerHTML = `
        <strong>${product.title}</strong><br>
        Descripci√≥n: ${product.description}<br>
        Precio: $${product.price}<br>
        Stock: ${product.stock}<br>
        <img src="${product.thumbnails[0]}" alt="${product.title}" width="100">
        <hr>
      `;

      productList.appendChild(listItem);
    });
  });
</script>
  -->